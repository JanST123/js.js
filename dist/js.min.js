var js={onReady:function(e){"function"==typeof e&&("complete"==document.readyState||"interactive"==document.readyState?e():"function"==typeof document.addEventListener&&document.addEventListener("DOMContentLoaded",e))},hasClass:function(e,t){var n=[];return e.hasAttribute("class")&&(n=e.getAttribute("class").trim().split(" ")),0<=n.indexOf(t)},addClass:function(e,t){var n=[];return e.hasAttribute("class")&&(n=e.getAttribute("class").trim().split(" ")),n.indexOf(t)<0&&n.push(t),n=n.join(" "),e.setAttribute("class",n),!0},removeClass:function(e,t){var n=[];return e.hasAttribute("class")&&(n=e.getAttribute("class").trim().split(" ")),0<=n.indexOf(t)&&delete n[n.indexOf(t)],n=n.join(" ").trim(),e.setAttribute("class",n),!0}},storageBackend="cookie";js.storage={getBackend:function(){return storageBackend},setBackend:function(e){if(["cookie","localstorage"].indexOf(e)<0)throw"js.storage Backend must be cookie or localstorage";"localstorage"!=(storageBackend=e)||"localStorage"in window||(storageBackend="cookie")},get:function(e,t){if(t=void 0===t?null:t,"cookie"==storageBackend){var n=new RegExp(e+"=([^;]+)");if("string"==typeof document.cookie&&document.cookie.match(n))return JSON.parse(RegExp.$1)}else if("localstorage"==storageBackend&&js.storage.has(e))return JSON.parse(localStorage.getItem(e));return t},set:function(e,t,n){if(n=n||null,"cookie"==storageBackend){var o=e+"="+JSON.stringify(t).replace(/;/g,"#SEMIKOLON#")+";";n&&(n instanceof Date?o+="expires="+n.toGMTString():o+="expires="+n),document.cookie=o}else"localstorage"==storageBackend&&localStorage.setItem(e,JSON.stringify(t))},has:function(e){if("cookie"==storageBackend){var t=new RegExp(name+"=([^;]+)");if("string"==typeof document.cookie&&document.cookie.match(t))return!0}else if("localstorage"==storageBackend)return null!==localStorage.getItem(e);return!1},delete:function(e){"cookie"==storageBackend?document.cookie=e+"=; expires=Thu, 01 Jan 1970 00:00:01 GMT;":"localstorage"==storageBackend&&localStorage.removeItem(e)}},js.getCookie=function(e,t){var n=js.storage.getBackend();js.storage.setBackend("cookie");var o=js.storage.get(e,t);return js.storage.setBackend(n),o},js.setCookie=function(e,t,n){var o=js.storage.getBackend();js.storage.setBackend("cookie"),js.storage.set(e,t,n),js.storage.setBackend(o)},js.addEl=function(e,t,n,o){if(["append","prepend","after","before"].indexOf(o=o||"append")<0)throw"js.addEl: invalid position!";n=n||null;var s=document.createElement(t);switch(o){case"before":e.parentNode.insertBefore(s,e);break;case"after":e.parentNode.insertBefore(s,e.nextSibling);break;case"prepend":e.insertBefore(s,e.firstChild);break;case"append":e.appendChild(s)}return null!==n&&js.addClass(s,n),s},js.parentUntil=function(e,t){if(e instanceof HTMLElement)for(var n=e;n=n.parentNode;){if("function"==typeof n.matches&&n.matches(t))return n;if("function"==typeof n.msMatchesSelector&&n.msMatchesSelector(t))return n}return!1},js.isDescendant=function(e,t){if(e instanceof HTMLElement)for(var n=e;n=n.parentNode;)if(n===t)return!0;return!1},js.addHtml=function(e,t,n){if(["append","prepend","after","before"].indexOf(n=n||"append")<0)throw"js.addEl: invalid position!";var o=document.createElement("div");o.innerHTML=t.trim();var s=o.firstChild;switch(n){case"before":e.parentNode.insertBefore(s,e);break;case"after":e.parentNode.insertBefore(s,e.nextSibling);break;case"prepend":e.insertBefore(s,e.firstChild);break;case"append":e.appendChild(s)}return s},js.removeEl=function(e){return!(!e||!e.parentNode)&&(e.parentNode.removeChild(e),!0)},js.selectAllText=function(e){window.selectAllTextTimeout&&(window.clearTimeout(window.selectAllTextTimeout),window.selectAllTextTimeout=null),window.selectAllTextTimeout=window.setTimeout(function(){e.focus(),e.setSelectionRange(0,9999),window.selectAllTextTimeout=null},100)},js.updateMetaTag=function(e,t){e=e.replace(":","\\:");var n=document.createElement("DIV");if(n.innerHTML=t,t=n.textContent,void 0!==document.head&&"function"==typeof document.head.querySelector){var o=document.head.querySelector("meta[name="+e+"],meta[http-equiv="+e+"],meta[property="+e+"]");if(o||null===t||(o=js.addEl(document.head,"meta")).setAttribute("name",e),o)return null===t?js.removeEl(o):o.setAttribute("content",t),!0}return!1},js.updateTitle=function(e){if(void 0!==document.head&&"function"==typeof document.head.querySelector){var t=document.head.getElementsByTagName("title");if((t=t.length?t[0]:null)||null===e||(t=js.addEl(document.head,"title")),t)return null===e?js.removeEl(t):t.textContent=e,!0}return!1},js.getTitle=function(){if(void 0!==document.head&&"function"==typeof document.head.querySelector){var e=document.head.getElementsByTagName("title");if(e=e.length?e[0]:null)return e.textContent}return""},js.updateLinkTag=function(e,t){if(name=name.replace(":","\\:"),void 0!==document.head&&"function"==typeof document.head.querySelector){var n=document.head.querySelector("link[rel="+e+"]");if(n||null===t||(n=js.addEl(document.head,"link")).setAttribute("rel",e),n)return null===t?js.removeEl(n):n.setAttribute("href",t),!0}return!1},js.animateScroll=function(t,n,o){if(n instanceof Node&&(o=n,n=null),n=n||400,t!=(o?o.scrollTop:window.scrollY)){t=Math.floor(t);var s=0,e=o?o.scrollTop:window.scrollY,r=-1,a=+new Date-1,i=e<t?1:-1,u=1==i?t-e:e-t,c=function(){if(window.scrollY!=r){r=o?o.scrollTop:window.scrollY;var e=+(o?o.scrollTop:window.scrollY)+(new Date-a)/n*u*i;e=1==i?Math.ceil(e):Math.floor(e),t<=e&&1==i||e<=t&&-1==i?(e=t,cancelAnimationFrame(s)):(a=+new Date,s=requestAnimationFrame(c)),o?o.scrollTop=e:window.scrollTo(0,e)}else cancelAnimationFrame(s)};s=requestAnimationFrame(c)}},js.dereference=function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t},js.ajaxParam=function(e,t,n){for(var o in t=t||"",n=n||[],e)if(e.hasOwnProperty(o)){if("length"==o)continue;if("object"==typeof e[o]&&null!==e[o])n.push(o),t=js.ajaxParam(js.dereference(e[o]),t,n),n.pop();else{""!==t&&(t+="&");for(var s="",r=0;r<n.length;++r)s+=""===s?n[r]:"["+n[r]+"]";s+=""!==s?"["+o+"]":o,null===e[o]?t+=s+"=":t+=s+"="+encodeURIComponent(e[o])}}return t},js.isTouchDevice=function(){return"ontouchstart"in window||0<navigator.maxTouchPoints||0<navigator.msMaxTouchPoints},js.objectMerge=function(e,t){var n=js.dereference(e);for(var o in t)t.hasOwnProperty(o)&&(n.hasOwnProperty(o)&&"object"==typeof n[o]&&null!==n[o]&&"object"==typeof t[o]&&null!==t[o]?n[o]=js.objectMerge(e[o],t[o]):n[o]=t[o]);return n};var ajaxDefaultSettings={};js.ajaxSetup=function(e){ajaxDefaultSettings=e},js.ajax=function(e,t){var n=new XMLHttpRequest,o=[["X-Requested-With","xmlhttprequest"]];if(t=t||{},(t=js.objectMerge(ajaxDefaultSettings,t)).method=t.method||"GET",t.user=t.user||null,t.password=t.password||null,t.context=t.context||t,"string"==typeof t.accepts?o.push(["Accept",t.accepts]):"string"==typeof t.dataType&&"json"==t.dataType?o.push(["Accept","application/json"]):o.push(["Accept","*/*"]),"string"==typeof t.contentType?o.push(["Content-Type",t.contentType]):o.push(["Content-Type","application/x-www-form-urlencoded; charset=UTF-8"]),"object"==typeof t.headers&&null!==t.headers)for(var s in t.headers)if(t.headers.hasOwnProperty(s)){if("length"==s)continue;if("object"==typeof t.headers[s]&&void 0!==t.headers[s].length)o.push(t.headers[s]);else{var r=t.headers[s].split(":");2==r.length&&(r[1]=r[1].trim(),o.push(r))}}if("object"==typeof t.xhrFields&&null!==t.xhrFields)for(var s in t.xhrFields)if(t.xhrFields.hasOwnProperty(s)){if("length"==s)continue;n[s]=t.xhrFields[s]}var a=null;if("object"==typeof t.data&&null!==t.data?a=js.ajaxParam(t.data):"string"==typeof t.data&&(a=t.data),"GET"==t.method&&a){var i=e.split("?");1<i.length?i[1]+="&":i[1]="",i[1]+=a,e=i[0]+"?"+i[1]}n.open(t.method,e,!0,t.user,t.password);for(var u=0;u<o.length;++u)n.setRequestHeader(o[u][0],o[u][1]);return"function"==typeof t.beforeSend&&t.beforeSend.call(t.context,n,t),"number"==typeof t.timeout&&(n.timeout=t.timeout),n.addEventListener("load",function(){if(4==this.readyState){if("function"==typeof t.complete&&!1===t.complete.call(t.context,this,this.response))return;if(400<=this.status)"function"==typeof t.error&&t.error.call(t.context,this,this.response);else if(200==this.status){var e=this.response;if("string"==typeof t.dataType&&"json"==t.dataType)try{e=JSON.parse(this.response)}catch(e){"function"==typeof t.error&&t.error.call(t.context,this,this.response)}"function"==typeof t.dataFilter&&t.dataFilter.call(t.context,e,t.dataType),"function"==typeof t.success&&t.success.call(t.context,e,this.response,this)}"object"==typeof t.statusCode&&null!==t.statusCode&&"function"==typeof t.statusCode[this.status]&&t.statusCode[this.status].call(t.context,this,this.response)}}),n.addEventListener("error",function(){"function"==typeof t.error&&t.error.call(t.context,n,"error")}),"function"==typeof t.progressCallback&&n.addEventListener("progress",t.progressCallback),"POST"==t.method?n.send(a):n.send(),n},js.get=function(e,t,n,o,s){return"string"==typeof o&&(s=o,o=null),t=t||{},s=s||"text",js.ajax(e,{data:t,dataType:s,error:o,success:n,method:"GET"})},js.post=function(e,t,n,o,s){return"string"==typeof o&&(s=o,o=null),t=t||{},s=s||"text",js.ajax(e,{data:t,dataType:s,error:o,success:n,method:"POST"})},js.getStyleProperty=function(e,t){var n=null;return"function"==typeof window.getComputedStyle?n=window.getComputedStyle(e).getPropertyValue(t):e.currentStyle&&(n=e.currentStyle[t]),n},js.pregQuote=function(e){return"string"==typeof e?e.replace(/([\.\\\+\*\?\[\^\]\$\(\)\{\}\=\!\|\:\-])/g,"\\$1"):e},js.serializeFormValues=function(e,t){t=t||!1;var n={};if(e&&"function"==typeof e.querySelectorAll){var o=e.querySelectorAll("input,select,textarea");function s(e,t){"string"==typeof e.name&&e.name.match(/(.*)\[(.*)\]$/)?""===RegExp.$2?("object"!=typeof n[RegExp.$1]&&(n[RegExp.$1]=[]),n[RegExp.$1].push(t)):("object"!=typeof n[RegExp.$1]&&(n[RegExp.$1]={}),n[RegExp.$1][RegExp.$2]=calue):n[e.name]=t}for(var r=0;r<o.length;++r)void 0===o[r].type||"checkbox"!=o[r].type&&"radio"!=o[r].type?"SELECT"==o[r].tagName?s(o[r],o[r].options[o[r].selectedIndex].value):s(o[r],o[r].value):o[r].checked&&s(o[r],o[r].value)}return t?n:js.ajaxParam(n)},js.triggerEvent=function(e,t,n){var o=null;(n=n||null)?(o=document.createEvent("CustomEvent")).initCustomEvent(t,!0,!0,n):(o=document.createEvent("Event")).initEvent(t,!0,!0),e.dispatchEvent(o)},js.eventListener=function(i){i=i||null;var o=null,s=null,r=null,a=!1;function u(n){return function(e){this.onselectstart=function(){return!1},js.addClass(document.body,"prevent-selection-for-longtouch"),a=!1,"object"==typeof e.touches[0]&&"number"==typeof e.touches[0].clientX&&(s=e.touches[0].clientX,r=e.touches[0].clientY);var t=this;o=window.setTimeout(function(){a=!0,"function"==typeof navigator.vibrate&&navigator.vibrate(50),n.call(t,e)},500)}}function c(e){js.removeClass(document.body,"prevent-selection-for-longtouch"),a&&(e.preventDefault(),a=!1),o&&(window.clearTimeout(o),o=null)}function l(e){o&&"object"==typeof e.touches[0]&&"number"==typeof e.touches[0].clientX&&null!==s&&null!==r&&(20<Math.abs(s-e.touches[0].clientX)||Math.abs(r-e.touches[0].clientY))&&(window.clearTimeout(o),o=null)}return{add:function(e,t,n,o){if(i&&"function"==typeof i.addEventListener){o=o||!1,"string"==typeof t&&(t=[t]);for(var s=0;s<t.length;++s)switch(t[s]){case"longtouch":var r=u(n);i.addEventListener("touchstart",r,o),js.boundEvents.push([i,e+"-longtouchstart","touchstart",r,o]),i.addEventListener("touchend",c,o),js.boundEvents.push([i,e+"-longtouchend","touchend",c,o]),i.addEventListener("touchmove",l,o),js.boundEvents.push([i,e+"-longtouchmove","touchmove",l,o]);break;default:i.addEventListener(t[s],n,o),js.boundEvents.push([i,e,t[s],n,o])}}},remove:function(e,t,n,o){if(i&&"function"==typeof i.removeEventListener){o=o||!1,"string"==typeof t&&(t=[t]);for(var s=!1,r=[],a=0;a<js.boundEvents.length;++a)js.boundEvents[a][0]===i&&js.boundEvents[a][1]==e?(i.removeEventListener(js.boundEvents[a][2],js.boundEvents[a][3],js.boundEvents[a][4]),delete js.boundEvents[a],s=!0):r.push(js.boundEvents[a]);if(js.boundEvents=r,!s&&n)for(a=0;a<t.length;++a)i.removeEventListener(t[a],n,o)}},trigger:function(e,t){t=t||{};for(var n=0;n<js.boundEvents.length;++n)null!==i&&js.boundEvents[n][0]!==i||js.boundEvents[n][1]!=e||(t.type=js.boundEvents[n][2],js.boundEvents[n][3].call(js.boundEvents[n][0],t))},pause:function(e){for(var t=js.dereference(js.boundEvents),n=0;n<js.boundEvents.length;++n)t[n][0]===i&&t[n][1]==e&&(js.pausedEvents.push(t[n]),js.eventListener(i).remove(t[n][1],t[n][2],t[n][3],t[n][4]))},resume:function(e){for(var t=[],n=0;n<js.pausedEvents.length;++n)js.pausedEvents[n][0]===i&&js.pausedEvents[n][1]==e&&(js.eventListener(i).add(js.pausedEvents[n][1],js.pausedEvents[n][2],js.pausedEvents[n][3],js.pausedEvents[n][4]),t.push(n));for(var o=0;o<t.length;++o)js.pausedEvents.splice(t[o],1)},pauseAll:function(e){e=e||null;for(var t=[],n=0;n<js.boundEvents.length;++n)-1===js.boundEvents[n][1].indexOf(e)&&(js.pausedEvents.push(js.boundEvents[n]),t.push(js.boundEvents[n]));for(var o=0;o<t.length;++o)js.eventListener(t[o][0]).remove(t[o][1],t[o][2],t[o][3],t[o][4])},resumeAll:function(){for(var e=[],t=0;t<js.pausedEvents.length;++t)js.eventListener(js.pausedEvents[t][0]).add(js.pausedEvents[t][1],js.pausedEvents[t][2],js.pausedEvents[t][3],js.pausedEvents[t][4]),e.push(t);for(var n=0;n<e.length;++n)js.pausedEvents.splice(e[n],1)}}},js.boundEvents=[],js.pausedEvents=[],module.exports=js;